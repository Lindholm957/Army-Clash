# Army Clash - Unity Combat Simulator

## Описание проекта
Реализация симулятора сражений в стиле Army Clash для мобильных платформ. Две армии по 20 юнитов сражаются друг с другом до полного уничтожения одной из сторон.

## Время выполнения
**Затрачено времени: ~6 часов**

## Архитектура проекта

### Выбранный архитектурный подход: Component-Based + MVC + Observer Pattern

**Обоснование выбора:**

1. **Component-Based Architecture** - естественный для Unity подход, обеспечивает максимальную производительность для игровых объектов
2. **MVC (Model-View-Controller)** - четкое разделение ответственности между данными (Model), отображением (View) и логикой управления (Controller)
3. **Observer Pattern (EventBus)** - слабая связанность между компонентами, высокая расширяемость и тестируемость

**Почему это оптимально для Army Clash:**
- **Производительность** - Component-Based идеально подходит для большого количества юнитов
- **Масштабируемость** - MVC позволяет легко добавлять новые UI элементы и логику
- **Поддерживаемость** - четкое разделение кода на логические слои
- **Тестируемость** - каждый компонент можно тестировать независимо
- **Расширяемость** - EventBus позволяет легко добавлять новые типы событий

### Структура проекта

```
Assets/
├── Scripts/
│   ├── Controllers/              # MVC - Controllers
│   │   └── BattleController.cs      # Управление игровой логикой
│   ├── Models/                   # MVC - Models  
│   │   └── BattleModel.cs          # Хранение данных игры
│   ├── Views/                     # MVC - Views
│   │   └── BattleView.cs           # UI и взаимодействие
│   ├── Events/                    # Observer Pattern
│   │   └── EventBus.cs             # Система событий
│   ├── Services/                  # Business Logic
│   │   └── ArmySpawner.cs          # Сервис спавна юнитов
│   ├── Battle/                    # Components
│   │   ├── UnitAgent.cs            # Компонент поведения юнита
│   │   ├── BattleArmy.cs          # Менеджер армии
│   │   ├── UnitDefinitions.cs     # Enums и структуры
│   │   ├── UnitStatCalculator.cs  # Расчет характеристик
│   │   ├── ArmyBuilder.cs         # Создание юнитов
│   │   ├── BaseStats.cs           # ScriptableObject базы
│   │   ├── ShapeModifier.cs       # ScriptableObject формы
│   │   ├── SizeModifier.cs       # ScriptableObject размера
│   │   ├── ColorModifier.cs      # ScriptableObject цвета
│   │   ├── StatConfiguration.cs   # Конфигурация статов
│   │   └── UnitDatabase.cs       # База данных юнитов
├── Data/                     # ScriptableObjects
├── Materials/               # Материалы юнитов
└── Scenes/                  # Сцены
```

## Ключевые компоненты архитектуры

### 1. BattleController (MVC - Controller)
Управляет игровой логикой и состоянием:
- Обработка пользовательского ввода из View
- Управление состоянием игры через Model
- Подписка на игровые события
- Координация между компонентами

### 2. BattleModel (MVC - Model)
Хранит данные о состоянии игры:
- Текущее состояние (Menu, Simulation, Result)
- Данные об армиях и черновиках
- Настройки скорости игры
- Чистые данные без логики отображения

### 3. BattleView (MVC - View)
Отвечает за UI и взаимодействие:
- Отображение всех UI элементов
- Обработка пользовательского ввода
- Подписка на события для обновления UI
- Делегирование действий Controller

### 4. EventBus (Observer Pattern)
Система событий для слабой связанности:
- Публикация/подписка на события
- Передача данных между компонентами
- Расширяемость без изменения кода
- Тестируемость через мокирование событий

### 5. Component-Based юниты
UnitAgent как компонент:
- Изолированное поведение отдельного юнита
- Использует EventBus для коммуникации
- Высокая производительность для множества объектов
- Легкое тестирование и модификация

### 6. ScriptableObjects для данных
Централизованное управление данными:
- BaseStats - базовые характеристики
- ShapeModifier/SizeModifier/ColorModifier - модификаторы
- StatConfiguration - объединение всех настроек
- Баланс через Inspector без изменения кода

## Правила симуляции

1. **Армии**: 20 юнитов в каждой армии
2. **Расположение**: 5x4 сетка, лицом друг к другу
3. **Выбор цели**: Юниты атакуют ближайшего врага
4. **Атака**: Рукопашная, необходимо приблизиться на дистанцию 1.3 единицы
5. **Скорость атаки**: ATKSPD = 1/скорость атаки (чем больше ATKSPD, тем медленнее)
6. **Урон**: Равен значению ATK атакующего
7. **Смерть**: Юнит удаляется при HP ≤ 0

## Дополнительная функция
**Ускорение битвы**

В проекте реализована функция ускорения битвы, позволяющая увеличивать скорость симуляции сражения между двумя армиями.
Данная функция была выбрана по следующим причинам:
- Экономия времени
- При большом количестве юнитов и сложных характеристиках (здоровье, урон, скорость атаки и т.д.) симуляция боя на стандартной скорости может занимать значительное время
- Удобство тестирования и балансировки
- Сохранение наглядности. В отличие от мгновенного расчёта результата, ускоренная битва сохраняет визуальное и логическое представление процесса сражения, позволяя наблюдать взаимодействие армий, но в более динамичном темпе.
- Гибкость для пользователя.Пользователь может самостоятельно выбирать комфортную скорость боя: наблюдать сражение в обычном режиме или ускорить его, если результат важнее самого процесса.

Таким образом, функция ускорения битвы повышает удобство использования проекта, делает его более гибким и практичным как для разработки, так и для конечного пользователя.

## Будущие улучшения

1. **Оптимизация**: Object pooling, spatial partitioning
2. **Фичи**: Специальные способности, мораль юнитов, эффекты
3. **UI**: Анимации, звук, визуальные эффекты
4. **Архитектура**: Transition to ECS для очень больших армий